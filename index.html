<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥µé™å€–å­˜è€…ï¼šè‡ªå‹•å°„æ“Šä¿®å¾©ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #020617; color: #f8fafc; font-family: 'Inter', sans-serif; overflow: hidden; margin: 0; }
        canvas { display: block; cursor: crosshair; }
        
        #splashScreen {
            position: absolute; inset: 0; background: #000; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            transition: opacity 1s ease-out;
        }
        .logo-container {
            width: 300px; height: 300px; position: relative;
            display: flex; flex-direction: column; align-items: center;
        }
        .logo-circle {
            width: 100px; height: 100px; border: 8px solid #3b82f6; border-radius: 50%;
            border-top-color: transparent; animation: spin 1s linear infinite;
        }
        .logo-text {
            margin-top: 20px; font-size: 24px; font-weight: 900; color: white;
            letter-spacing: 4px; opacity: 0; animation: fade-in 1.5s forwards 0.5s;
        }
        .studio-text {
            font-size: 14px; color: #3b82f6; letter-spacing: 8px; margin-top: 5px;
            opacity: 0; animation: fade-in 1.5s forwards 1s;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #xpBarContainer { position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: #1e293b; z-index: 30; }
        #xpBar { width: 0%; height: 100%; background: linear-gradient(90deg, #3b82f6, #a855f7); box-shadow: 0 0 15px #3b82f6; transition: width 0.3s; }
        
        .boss-warning { 
            position: absolute; top: 35%; left: 0; width: 100%; text-align: center;
            font-size: 4rem; font-weight: 900; color: #ef4444; z-index: 100;
            text-transform: uppercase; letter-spacing: 0.5rem;
            animation: boss-alert 0.6s infinite alternate; display: none;
            text-shadow: 0 0 30px #ef4444; pointer-events: none;
        }
        @keyframes boss-alert { 0% { opacity: 0.3; } 100% { opacity: 1; } }
        
        #bossHpContainer { 
            position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); width: 60%; height: 15px; 
            background: #450a0a; border: 2px solid #ef4444; border-radius: 99px; 
            display: none; z-index: 20; overflow: hidden;
        }
        #bossHpBar { width: 100%; height: 100%; background: #ef4444; transition: width 0.1s; }
        
        .modal { backdrop-filter: blur(20px); background: rgba(7, 10, 25, 0.85); }
        
        #aiBrief {
            position: absolute; bottom: 30px; left: 30px; width: 300px;
            background: rgba(15, 23, 42, 0.9); border-left: 4px solid #06b6d4;
            padding: 15px; border-radius: 4px; font-size: 14px;
            transform: translateX(-150%); transition: transform 0.5s;
            z-index: 100; pointer-events: none;
        }
        #aiBrief.active { transform: translateX(0); }
    </style>
</head>
<body class="flex items-center justify-center h-screen m-0 select-none">

    <!-- é–‹å ´å‹•ç•« -->
    <div id="splashScreen">
        <div class="logo-container">
            <div class="logo-circle"></div>
            <div class="logo-text">ç›§å“¥éŠæˆ²å·¥ä½œå®¤</div>
            <div class="studio-text">LUGO STUDIO</div>
        </div>
        <button id="skipBtn" onclick="skipSplash()" class="mt-20 text-white/40 hover:text-white text-xs border border-white/20 px-6 py-2 rounded-full transition-all">é»æ“Šå•Ÿå‹•éŸ³è¨Šä¸¦è·³é</button>
    </div>

    <!-- æ­£å¼ç‰ˆç™¼å¸ƒå…¬å‘Š -->
    <div id="announcementModal" class="hidden absolute inset-0 flex flex-col items-center justify-center z-[1100] modal">
        <div class="bg-red-900 border-4 border-yellow-500 p-8 rounded-3xl max-w-md w-11/12 text-center shadow-[0_0_50px_rgba(234,179,8,0.3)]">
            <div class="text-6xl mb-4">ğŸ“¢</div>
            <h2 class="text-3xl font-black text-yellow-500 mb-4 italic">æ­£å¼ç‰ˆå·²ç™¼å¸ƒï¼</h2>
            <div class="space-y-4 text-red-100 mb-8 leading-relaxed">
                <p class="text-lg">è¦ªæ„›çš„å€–å­˜è€…ï¼š</p>
                <p>æœ¬ä½œçš„æ­£å¼å®Œæ•´ç‰ˆæœ¬å·²ç¶“æ­£å¼ä¸Šç·šï¼</p>
                <p class="bg-red-950/50 p-3 rounded-xl border border-red-700 font-bold text-yellow-200">
                    æ­¤ã€Œæ–°å¹´æ¸¬è©¦ç‰ˆã€å³æ—¥èµ·å°‡åœæ­¢å…§å®¹æ›´æ–°ã€‚
                </p>
                <p class="text-sm opacity-80">æ„Ÿè¬æ‚¨åœ¨æ¸¬è©¦æœŸé–“çš„æ”¯æŒèˆ‡é™ªä¼´ï¼Œç¥æ‚¨æ–°å¹´å¿«æ¨‚ï¼Œè¬äº‹å¦‚æ„ï¼</p>
            </div>
            <button onclick="closeAnnouncement()" class="w-full bg-yellow-500 hover:bg-yellow-400 text-red-950 font-black py-4 rounded-2xl text-xl transition-all active:scale-95">
                æˆ‘çŸ¥é“äº† (é€²å…¥éŠæˆ²)
            </button>
        </div>
    </div>

    <!-- UI -->
    <div id="xpBarContainer"><div id="xpBar"></div></div>
    <div id="bossHpContainer"><div id="bossHpBar"></div></div>
    <div id="bossWarning" class="boss-warning">è­¦å‘Šï¼šBOSS æ¥è¿‘ä¸­</div>

    <div id="aiBrief">
        <div class="text-cyan-400 font-bold mb-1">æˆ°è¡“ AI æŒ‡ä»¤</div>
        <div id="aiBriefContent" class="text-slate-300 italic">æ­£åœ¨æƒæå€åŸŸ...</div>
    </div>

    <div class="relative w-full h-full">
        <canvas id="gameCanvas"></canvas>
        <div class="hud absolute top-8 left-8 pointer-events-none">
            <div id="hpUI" class="text-white font-black text-2xl italic">HP: 100 / 100</div>
            <div class="w-48 h-2 bg-slate-900 rounded-full mt-1"><div id="hpInnerBar" class="h-full bg-red-500 rounded-full" style="width: 100%"></div></div>
        </div>
        <div class="hud absolute top-8 right-8 text-right pointer-events-none">
            <div id="scoreUI" class="text-white font-mono text-3xl">000000</div>
            <div class="text-yellow-400 font-bold">è»è³‡: <span id="coinVal">0</span></div>
        </div>
    </div>

    <!-- ä¸»é¸å–® -->
    <div id="startMenu" class="absolute inset-0 flex flex-col items-center justify-center z-50 modal opacity-0 pointer-events-none transition-opacity duration-700">
        <h1 class="text-7xl font-black text-white italic mb-2">SURVIVOR</h1>
        <h2 class="text-xl font-bold text-yellow-500 tracking-[0.4em] mb-12">ç›§å“¥éŠæˆ²å·¥ä½œå®¤ç‰¹è£½ç‰ˆ</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full max-w-4xl px-6">
            <div class="bg-slate-900/80 p-6 rounded-2xl border border-slate-700 flex justify-around items-center">
                <div class="text-center">
                    <p class="text-xs text-slate-400 uppercase tracking-widest">æœ€é«˜åˆ†æ•¸</p>
                    <p id="menuHighScore" class="text-2xl font-bold">0</p>
                </div>
                <div class="text-center">
                    <p class="text-xs text-slate-400 uppercase tracking-widest">ç´¯ç©è»è³‡</p>
                    <p id="menuCoins" class="text-2xl font-bold text-yellow-400">0</p>
                </div>
            </div>
            <div class="flex flex-col gap-3">
                <button onclick="startGame(false)" class="bg-blue-600 hover:bg-blue-500 py-6 rounded-xl text-xl font-black text-white transition-all">é€²å…¥æˆ°å ´</button>
                <button onclick="startGame(true)" class="bg-gradient-to-r from-red-600 to-orange-500 py-3 rounded-xl font-bold text-white text-sm">ğŸ§¨ æ–°å¹´æŒ‘æˆ°ï¼šè¯ä»”æ¨¡å¼</button>
            </div>
        </div>
    </div>

    <!-- å‡ç´šé¸å–® -->
    <div id="upgradeMenu" class="hidden absolute inset-0 flex flex-col items-center justify-center z-40 modal">
        <h2 class="text-3xl font-black text-white mb-10 italic">æˆ°è¡“å‡ç´šé¸æ“‡</h2>
        <div id="upgradeOptions" class="flex flex-wrap justify-center gap-4"></div>
    </div>

    <script>
        // --- éŸ³æ•ˆå¼•æ“ ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;

            switch(type) {
                case 'shoot':
                    osc.type = 'square';
                    osc.frequency.setValueAtTime(880, now);
                    osc.frequency.exponentialRampToValueAtTime(110, now + 0.1);
                    gain.gain.setValueAtTime(0.05, now);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(); osc.stop(now + 0.1);
                    break;
                case 'hit':
                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(100, now);
                    gain.gain.setValueAtTime(0.03, now);
                    gain.gain.linearRampToValueAtTime(0, now + 0.05);
                    osc.start(); osc.stop(now + 0.05);
                    break;
                case 'explode':
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(150, now);
                    osc.frequency.exponentialRampToValueAtTime(40, now + 0.3);
                    gain.gain.setValueAtTime(0.2, now);
                    gain.gain.linearRampToValueAtTime(0, now + 0.3);
                    osc.start(); osc.stop(now + 0.3);
                    break;
                case 'levelup':
                    osc.type = 'sine';
                    [440, 554, 659, 880].forEach((f, i) => {
                        osc.frequency.setValueAtTime(f, now + i * 0.1);
                    });
                    gain.gain.setValueAtTime(0.1, now);
                    gain.gain.linearRampToValueAtTime(0, now + 0.5);
                    osc.start(); osc.stop(now + 0.5);
                    break;
                case 'splash':
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(220, now);
                    osc.frequency.exponentialRampToValueAtTime(880, now + 1.5);
                    gain.gain.setValueAtTime(0, now);
                    gain.gain.linearRampToValueAtTime(0.2, now + 0.5);
                    gain.gain.linearRampToValueAtTime(0, now + 1.5);
                    osc.start(); osc.stop(now + 1.5);
                    break;
                case 'boss':
                    osc.type = 'sawtooth';
                    osc.frequency.setValueAtTime(60, now);
                    osc.frequency.linearRampToValueAtTime(40, now + 1);
                    gain.gain.setValueAtTime(0.2, now);
                    gain.gain.linearRampToValueAtTime(0, now + 1);
                    osc.start(); osc.stop(now + 1);
                    break;
            }
        }

        // --- å­˜æª”èˆ‡åˆå§‹åŒ– ---
        const SAVE_KEY = 'lugo_survivor_v4_save';
        let userData = { highScore: 0, coins: 0 };
        function loadData() {
            const saved = localStorage.getItem(SAVE_KEY);
            if (saved) {
                userData = JSON.parse(saved);
                document.getElementById('menuHighScore').innerText = userData.highScore;
                document.getElementById('menuCoins').innerText = userData.coins;
                document.getElementById('coinVal').innerText = userData.coins;
            }
        }
        function saveData() { localStorage.setItem(SAVE_KEY, JSON.stringify(userData)); }

        // --- å…¬å‘Šèˆ‡è·³éé–‹å ´ ---
        function skipSplash() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            playSound('splash');
            document.getElementById('splashScreen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('announcementModal').classList.remove('hidden');
            }, 1000);
        }

        function closeAnnouncement() {
            document.getElementById('announcementModal').classList.add('hidden');
            document.getElementById('startMenu').classList.remove('opacity-0', 'pointer-events-none');
        }

        // --- éŠæˆ²å¼•æ“ ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let player, gameActive = false, gamePaused = false, frame = 0, score = 0;
        let enemies = [], bullets = [], orbs = [], activeBoss = null;
        let isNewYearMode = false;
        const keys = {};

        const UPGRADES = {
            bullets: { name: "å½ˆè—¥å€å¢", icon: "ğŸš€", level: 0 },
            fireRate: { name: "å°„é€Ÿæå‡", icon: "ğŸ”¥", level: 0 },
            damage: { name: "å¨åŠ›å¼·åŒ–", icon: "ğŸ’£", level: 0 },
            speed: { name: "æ•æ·æ¨é€²", icon: "ğŸƒ", level: 0 }
        };

        class Player {
            constructor() { 
                this.x = 0; this.y = 0; this.r = 18; this.hp = 100; this.speed = 5; 
                this.xp = 0; this.lv = 1; this.nextXp = 50; this.fireTimer = 0; 
            }
            update() {
                let s = this.speed + (UPGRADES.speed.level * 0.7);
                if (keys['KeyW'] || keys['ArrowUp']) this.y -= s;
                if (keys['KeyS'] || keys['ArrowDown']) this.y += s;
                if (keys['KeyA'] || keys['ArrowLeft']) this.x -= s;
                if (keys['KeyD'] || keys['ArrowRight']) this.x += s;
                
                this.fireTimer++;
                const currentFireRate = Math.max(5, 20 - UPGRADES.fireRate.level * 3);
                if (this.fireTimer >= currentFireRate) { 
                    this.shoot(); 
                    this.fireTimer = 0; 
                }
            }
            // å°‹æ‰¾æœ€è¿‘æ•µäººçš„é‚è¼¯
            findNearestEnemy() {
                let nearest = null;
                let minDist = Infinity;
                enemies.forEach(e => {
                    const dist = Math.hypot(e.x - this.x, e.y - this.y);
                    if (dist < minDist) {
                        minDist = dist;
                        nearest = e;
                    }
                });
                return nearest;
            }
            shoot() {
                const target = this.findNearestEnemy();
                // å¦‚æœæ²’æ•µäººï¼Œé»˜èªæœä¸Šç™¼å°„
                let baseAngle = -Math.PI / 2;
                if (target) {
                    baseAngle = Math.atan2(target.y - this.y, target.x - this.x);
                }

                const count = 1 + UPGRADES.bullets.level;
                playSound('shoot');
                for(let i=0; i<count; i++) {
                    // å­å½ˆå‘ˆç¾æ‰‡å½¢åˆ†ä½ˆ
                    const spread = (i - (count-1)/2) * 0.15;
                    const finalAngle = baseAngle + spread;
                    bullets.push({
                        x: this.x, 
                        y: this.y, 
                        vx: Math.cos(finalAngle)*15, 
                        vy: Math.sin(finalAngle)*15, 
                        dmg: 30 + (UPGRADES.damage.level * 20),
                        r: 5
                    });
                }
            }
            draw() {
                ctx.fillStyle = '#3b82f6'; 
                ctx.beginPath(); 
                ctx.arc(canvas.width/2, canvas.height/2, this.r, 0, Math.PI*2); 
                ctx.fill();
                ctx.strokeStyle = '#fff'; ctx.lineWidth = 2; ctx.stroke();
            }
        }

        class Enemy {
            constructor(boss = false) {
                const a = Math.random()*Math.PI*2;
                this.x = player.x + Math.cos(a)*850; 
                this.y = player.y + Math.sin(a)*850;
                this.isBoss = boss; 
                this.r = boss ? 70 : 20;
                this.hp = boss ? 5000 : (40 + frame/80); 
                this.maxHp = this.hp;
                this.speed = boss ? 1.2 : (1.5 + Math.random() * 1.5);
            }
            update() {
                const a = Math.atan2(player.y-this.y, player.x-this.x);
                this.x += Math.cos(a)*this.speed; 
                this.y += Math.sin(a)*this.speed;
            }
            draw() {
                const sx = this.x - player.x + canvas.width/2; 
                const sy = this.y - player.y + canvas.height/2;
                ctx.fillStyle = isNewYearMode ? '#ef4444' : (this.isBoss ? '#ef4444' : '#475569');
                ctx.beginPath(); ctx.arc(sx, sy, this.r, 0, Math.PI*2); ctx.fill();
                if (this.isBoss) {
                    ctx.strokeStyle = '#facc15'; ctx.lineWidth = 4; ctx.stroke();
                }
            }
        }

        function showAIBrief(txt) {
            const b = document.getElementById('aiBrief');
            document.getElementById('aiBriefContent').innerText = txt;
            b.classList.add('active'); setTimeout(() => b.classList.remove('active'), 3000);
        }

        function spawnBoss() {
            document.getElementById('bossWarning').style.display = 'block';
            playSound('boss');
            showAIBrief("è­¦å‘Šï¼šé«˜åƒ¹å€¼ç›®æ¨™é€²å…¥å€åŸŸï¼");
            setTimeout(() => {
                document.getElementById('bossWarning').style.display = 'none';
                activeBoss = new Enemy(true); 
                enemies.push(activeBoss);
                document.getElementById('bossHpContainer').style.display = 'block';
            }, 3000);
        }

        function levelUp() {
            playSound('levelup');
            player.lv++; player.xp = 0; player.nextXp *= 1.45;
            gamePaused = true;
            const menu = document.getElementById('upgradeMenu');
            const container = document.getElementById('upgradeOptions');
            menu.classList.remove('hidden'); container.innerHTML = '';
            
            Object.keys(UPGRADES).sort(()=>Math.random()-0.5).slice(0,3).forEach(key => {
                const up = UPGRADES[key];
                const btn = document.createElement('div');
                btn.className = "bg-slate-800 p-6 rounded-xl border border-slate-600 hover:border-blue-500 cursor-pointer w-48 text-center transition-all transform hover:scale-105";
                btn.innerHTML = `<div class="text-4xl mb-2">${up.icon}</div><div class="font-bold">${up.name}</div><div class="text-xs text-blue-400 mt-2">LV ${up.level} -> ${up.level+1}</div>`;
                btn.onclick = () => { 
                    UPGRADES[key].level++; 
                    menu.classList.add('hidden'); 
                    gamePaused = false; 
                    requestAnimationFrame(loop); 
                };
                container.appendChild(btn);
            });
        }

        function loop() {
            if (!gameActive || gamePaused) return;
            frame++;
            
            // æ¸…ç†ç•«å¸ƒ
            ctx.fillStyle = '#020617'; ctx.fillRect(0,0,canvas.width,canvas.height);
            
            player.update(); 
            player.draw();

            // ç”Ÿæˆæ•µäºº
            if (frame % 40 === 0) enemies.push(new Enemy());
            if (frame === 1500) spawnBoss(); 

            // å­å½ˆè™•ç†èˆ‡ç¢°æ’
            for (let bi = bullets.length - 1; bi >= 0; bi--) {
                const b = bullets[bi];
                b.x += b.vx; b.y += b.vy;
                
                const sx = b.x - player.x + canvas.width/2; 
                const sy = b.y - player.y + canvas.height/2;
                
                ctx.fillStyle = '#fff'; 
                ctx.beginPath(); 
                ctx.arc(sx, sy, b.r, 0, Math.PI*2); 
                ctx.fill();

                // ç§»é™¤è¶…å‡ºç¯„åœçš„å­å½ˆ
                if (Math.hypot(b.x - player.x, b.y - player.y) > 1000) {
                    bullets.splice(bi, 1);
                    continue;
                }

                // æ•µäººç¢°æ’åˆ¤å®š
                let hitSomething = false;
                for (let ei = enemies.length - 1; ei >= 0; ei--) {
                    const e = enemies[ei];
                    if (Math.hypot(b.x - e.x, b.y - e.y) < e.r + b.r) {
                        e.hp -= b.dmg;
                        hitSomething = true;
                        playSound('hit');
                        if (e.hp <= 0) {
                            playSound('explode');
                            score += e.isBoss ? 10000 : 100;
                            orbs.push({x: e.x, y: e.y, v: e.isBoss ? 200 : 15});
                            enemies.splice(ei, 1);
                            if (e.isBoss) { 
                                activeBoss = null; 
                                document.getElementById('bossHpContainer').style.display = 'none'; 
                                showAIBrief("BOSS å·²æ“Šæ®ºï¼"); 
                            }
                        }
                        break;
                    }
                }
                if (hitSomething) {
                    bullets.splice(bi, 1);
                }
            }

            // æ•µäººèˆ‡ç©å®¶ç¢°æ’
            enemies.forEach(e => {
                e.update(); e.draw();
                if (Math.hypot(player.x - e.x, player.y - e.y) < player.r + e.r) {
                    player.hp -= e.isBoss ? 0.8 : 0.4;
                    if (frame % 15 === 0) playSound('hit');
                }
            });

            // ç¶“é©—çƒæ”¶é›†
            for (let oi = orbs.length - 1; oi >= 0; oi--) {
                const o = orbs[oi];
                const sx = o.x - player.x + canvas.width/2; 
                const sy = o.y - player.y + canvas.height/2;
                ctx.fillStyle = '#facc15'; ctx.beginPath(); ctx.arc(sx, sy, 5, 0, Math.PI*2); ctx.fill();
                
                const dist = Math.hypot(player.x - o.x, player.y - o.y);
                if (dist < 200) { // ç£å¸æ•ˆæœ
                    const angle = Math.atan2(player.y - o.y, player.x - o.x);
                    o.x += Math.cos(angle) * 8;
                    o.y += Math.sin(angle) * 8;
                }
                
                if (dist < 30) {
                    player.xp += o.v; 
                    userData.coins += 1;
                    orbs.splice(oi, 1);
                    if (player.xp >= player.nextXp) {
                        levelUp();
                        return; 
                    }
                }
            }

            // æ›´æ–° UI
            if (activeBoss) {
                document.getElementById('bossHpBar').style.width = Math.max(0, (activeBoss.hp / activeBoss.maxHp * 100)) + '%';
            }
            
            document.getElementById('hpInnerBar').style.width = Math.max(0, player.hp) + '%';
            document.getElementById('hpUI').innerText = `HP: ${Math.max(0, Math.ceil(player.hp))} / 100`;
            document.getElementById('scoreUI').innerText = score.toString().padStart(6, '0');
            document.getElementById('coinVal').innerText = userData.coins;
            document.getElementById('xpBar').style.width = (player.xp / player.nextXp * 100) + '%';

            // éŠæˆ²çµæŸåˆ¤å®š
            if (player.hp <= 0) { 
                gameActive = false; 
                if(score > userData.highScore) userData.highScore = score; 
                saveData(); 
                location.reload(); 
            } else {
                requestAnimationFrame(loop);
            }
        }

        function startGame(ny) {
            isNewYearMode = ny;
            document.getElementById('startMenu').classList.add('hidden');
            player = new Player(); 
            enemies = []; bullets = []; orbs = []; score = 0; frame = 0; 
            gameActive = true;
            showAIBrief(ny ? "æ˜¥ç¯€ç‰¹åˆ¥ä»»å‹™ï¼šæ¸…ç†ç´…è‰²å€åŸŸï¼" : "éƒ¨ç½²æˆåŠŸï¼Œæ³¨æ„å››å‘¨æ•µæƒ…ã€‚");
            requestAnimationFrame(loop);
        }

        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);
        window.onresize = () => { 
            canvas.width = window.innerWidth; 
            canvas.height = window.innerHeight; 
        };
        canvas.width = window.innerWidth; 
        canvas.height = window.innerHeight;
        
        loadData();
    </script>
</body>
</html>